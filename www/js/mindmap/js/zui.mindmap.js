/*!
 * ZUI: zui mindmap - v1.10.0 - 2023-07-28
 * http://openzui.com
 * GitHub: https://github.com/easysoft/zui.git 
 * Copyright (c) 2023 cnezsoft.com; Licensed MIT
 */
!function(t,e,i){"use strict";if("undefined"==typeof t)throw new Error("ZUI requires jQuery");Number.isNaN||"function"!=typeof isNaN||(Number.isNaN=isNaN),Number.parseInt||"function"!=typeof parseInt||(Number.parseInt=parseInt),Number.parseFloat||"function"!=typeof parseFloat||(Number.parseFloat=parseFloat),t.zui||(t.zui=function(e){t.isPlainObject(e)&&t.extend(t.zui,e)});var o={all:-1,left:0,middle:1,right:2},n=0;t.zui({uuid:function(t){var e=1e5*(Date.now()-1580890015292)+10*Math.floor(1e4*Math.random())+n++%10;return t?e:e.toString(36)},callEvent:function(t,e,o){if("function"==typeof t){o!==i&&(t=t.bind(o));var n=t(e);return e&&(e.result=n),!(n!==i&&!n)}return 1},strCode:function(t){var e=0;if("string"!=typeof t&&(t=String(t)),t&&t.length)for(var i=0;i<t.length;++i)e+=(i+1)*t.charCodeAt(i);return e},getMouseButtonCode:function(t){return"number"!=typeof t&&(t=o[t]),t!==i&&null!==t||(t=-1),t},defaultLang:"en",clientLang:function(){var i,o=e.config;if("undefined"!=typeof o&&o.clientLang&&(i=o.clientLang),!i){var n=t("html").attr("lang");i=n?n:navigator.userLanguage||navigator.userLanguage||t.zui.defaultLang}return i.replace("-","_").toLowerCase()},langDataMap:{},addLangData:function(e,i,o){var n={};o&&i&&e?(n[i]={},n[i][e]=o):e&&i&&!o?(o=i,t.each(o,function(t){n[t]={},n[t][e]=o[t]})):!e||i||o||t.each(e,function(e){var i=o[e];t.each(i,function(t){n[t]||(n[t]={}),n[t][e]=i[t]})}),t.extend(!0,t.zui.langDataMap,n)},getLangData:function(e,i,o){if(!arguments.length)return t.extend({},t.zui.langDataMap);if(1===arguments.length)return t.extend({},t.zui.langDataMap[e]);if(2===arguments.length){var n=t.zui.langDataMap[e];return n?i?n[i]:n:{}}if(3===arguments.length){i=i||t.zui.clientLang();var n=t.zui.langDataMap[e],a=n?n[i]:{};return t.extend(!0,{},o[i]||o.en||o.zh_cn,a)}return null},lang:function(){return arguments.length&&t.isPlainObject(arguments[arguments.length-1])?t.zui.addLangData.apply(null,arguments):t.zui.getLangData.apply(null,arguments)},_scrollbarWidth:0,getScrollbarSize:function(){var e=t.zui._scrollbarWidth;if(!e){var i=document.createElement("div");i.className="scrollbar-measure",document.body.appendChild(i),t.zui._scrollbarWidth=e=i.offsetWidth-i.clientWidth,document.body.removeChild(i)}return e},checkBodyScrollbar:function(){return document.body.clientWidth>=e.innerWidth?0:t.zui.getScrollbarSize()},fixBodyScrollbar:function(){if(t.zui.checkBodyScrollbar()){var e=t("body"),i=parseInt(e.css("padding-right")||0,10);return t.zui._scrollbarWidth&&e.css({paddingRight:i+t.zui._scrollbarWidth,overflowY:"hidden"}),!0}},resetBodyScrollbar:function(){t("body").css({paddingRight:"",overflowY:""})}}),t.fn.callEvent=function(e,o,n){var a=t(this),r=e.indexOf(".zui."),s=r<0?e:e.substring(0,r),d=t.Event(s,o);if(n===i&&r>0&&(n=a.data(e.substring(r+1))),n&&n.options){var l=n.options[s];"function"==typeof l&&(d.result=t.zui.callEvent(l,d,n))}return a.trigger(d),d},t.fn.callComEvent=function(t,e,o){o===i||Array.isArray(o)||(o=[o]);var n,a=this;a.trigger(e,o);var r=t.options[e];return r&&(n=r.apply(t,o)),n}}(jQuery,window,void 0),/*!
 * jQuery resize event - v1.1
 * http://benalman.com/projects/jquery-resize-plugin/
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * MIT & GPL http://benalman.com/about/license/
 */
function(t,e,i){"$:nomunge";function o(){n=e[s](function(){a.each(function(){var e=t(this),i=e.width(),o=e.height(),n=t.data(this,l);i===n.w&&o===n.h||e.trigger(d,[n.w=i,n.h=o])}),o()},r[c])}var n,a=t([]),r=t.resize=t.extend(t.resize,{}),s="setTimeout",d="resize",l=d+"-special-event",c="delay",p="throttleWindow";r[c]=250,r[p]=!0,t.event.special[d]={setup:function(){if(!r[p]&&this[s])return!1;var e=t(this);a=a.add(e),t.data(this,l,{w:e.width(),h:e.height()}),1===a.length&&o()},teardown:function(){if(!r[p]&&this[s])return!1;var e=t(this);a=a.not(e),e.removeData(l),a.length||clearTimeout(n)},add:function(e){function o(e,o,a){var r=t(this),s=t.data(this,l)||{};s.w=o!==i?o:r.width(),s.h=a!==i?a:r.height(),n.apply(this,arguments)}if(!r[p]&&this[s])return!1;var n;return"function"==typeof e?(n=e,o):(n=e.handler,void(e.handler=o))}}}(jQuery,this),function(){"use strict";var t=function(t,e){if(arguments.length>1){var i;if(2==arguments.length&&"object"==typeof e)for(var o in e)void 0!==e[o]&&(i=new RegExp("({"+o+"})","g"),t=t.replace(i,e[o]));else for(var n=1;n<arguments.length;n++)void 0!==arguments[n]&&(i=new RegExp("({["+(n-1)+"]})","g"),t=t.replace(i,arguments[n]))}return t},e=function(t){if(null!==t){var e,i;return i=/\d*/i,e=t.match(i),e==t}return!1},i={formatString:t,string:{format:t,isNum:e}};window.$&&window.$.zui?$.zui(i):window.stringHelper=i.string,window.noStringPrototypeHelper||(String.prototype.format||(String.prototype.format=function(){var e=[].slice.call(arguments);return e.unshift(this),t.apply(this,e)}),String.prototype.isNum||(String.prototype.isNum=function(){return e(this)}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){return(void 0===e||e>this.length)&&(e=this.length),this.substring(e-t.length,e)===t}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(t,e){return e=!e||e<0?0:+e,this.substring(e,e+t.length)===t}}),String.prototype.includes||(String.prototype.includes=function(){return String.prototype.indexOf.apply(this,arguments)!==-1}))}(),function(t){"use strict";var e=864e5,i=function(t){return t instanceof Date||("number"==typeof t&&t<1e10&&(t*=1e3),t=new Date(t)),t},o=function(t){return i(t).getTime()},n=function(t,e){t=i(t),void 0===e&&(e="yyyy-MM-dd hh:mm:ss");var o={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),"S+":t.getMilliseconds()};/(y+)/i.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in o)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?o[n]:("00"+o[n]).substr((""+o[n]).length)));return e},a=function(t,e){return t.setTime(t.getTime()+e),t},r=function(t,i){return a(t,i*e)},s=function(t){return new Date(i(t).getTime())},d=function(t){return t%4===0&&t%100!==0||t%400===0},l=function(t,e){return[31,d(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},c=function(t){return l(t.getFullYear(),t.getMonth())},p=function(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},u=function(t,e){var i=t.getDate();return t.setDate(1),t.setMonth(t.getMonth()+e),t.setDate(Math.min(i,c(t))),t},h=function(t,e){e=e||1;for(var i=new Date(t.getTime());i.getDay()!=e;)i=r(i,-1);return p(i)},f=function(t,e){return t.toDateString()===e.toDateString()},g=function(t,e){var i=h(t),o=r(s(i),7);return e>=i&&e<o},m=function(t,e){return t.getFullYear()===e.getFullYear()},v={formatDate:n,createDate:i,date:{ONEDAY_TICKS:e,create:i,getTimestamp:o,format:n,addMilliseconds:a,addDays:r,cloneDate:s,isLeapYear:d,getDaysInMonth:l,getDaysOfThisMonth:c,clearTime:p,addMonths:u,getLastWeekday:h,isSameDay:f,isSameWeek:g,isSameYear:m}};t.$&&t.$.zui?$.zui(v):t.dateHelper=v.date,t.noDatePrototypeHelper||(Date.ONEDAY_TICKS=e,Date.prototype.format||(Date.prototype.format=function(t){return n(this,t)}),Date.prototype.addMilliseconds||(Date.prototype.addMilliseconds=function(t){return a(this,t)}),Date.prototype.addDays||(Date.prototype.addDays=function(t){return r(this,t)}),Date.prototype.clone||(Date.prototype.clone=function(){return s(this)}),Date.isLeapYear||(Date.isLeapYear=function(t){return d(t)}),Date.getDaysInMonth||(Date.getDaysInMonth=function(t,e){return l(t,e)}),Date.prototype.isLeapYear||(Date.prototype.isLeapYear=function(){return d(this.getFullYear())}),Date.prototype.clearTime||(Date.prototype.clearTime=function(){return p(this)}),Date.prototype.getDaysInMonth||(Date.prototype.getDaysInMonth=function(){return c(this)}),Date.prototype.addMonths||(Date.prototype.addMonths=function(t){return u(this,t)}),Date.prototype.getLastWeekday||(Date.prototype.getLastWeekday=function(t){return h(this,t)}),Date.prototype.isSameDay||(Date.prototype.isSameDay=function(t){return f(t,this)}),Date.prototype.isSameWeek||(Date.prototype.isSameWeek=function(t){return g(t,this)}),Date.prototype.isSameYear||(Date.prototype.isSameYear=function(t){return m(this,t)}),Date.create||(Date.create=function(t){return i(t)}),Date.timestamp||(Date.timestamp=function(t){return o(t)}))}(window),function(t,e,i){"use strict";var o="zui.droppable",n={target:".droppable-target",deviation:5,sensorOffsetX:0,sensorOffsetY:0,dropToClass:"drop-to",dropTargetClass:"drop-target"},a=0,r=function(e,i){var o=this;o.id=a++,o.$=t(e),o.options=t.extend({},n,o.$.data(),i),o.init()};r.DEFAULTS=n,r.NAME=o,r.prototype.trigger=function(e,i){return t.zui.callEvent(this.options[e],i,this)},r.prototype.init=function(){var n,a,r,s,d,l,c,p,u,h,f,g,m,v,y=this,b=y.$,N=y.options,S=N.deviation,w="."+o+"."+y.id,D="mousedown"+w,x="mouseup"+w,z="mousemove"+w,k=N.selector,C=N.handle,$=N.flex,E=N.canMoveHere,T=N.dropToClass,M=N.noShadow,L=b,A=!1;N.dropOnMouseleave&&(x+=" mouseleave"+w);var P=function(e){if(A){if(g={left:e.pageX,top:e.pageY},!s){if(i.abs(g.left-u.left)<S&&i.abs(g.top-u.top)<S)return;var o=n.css("position");"absolute"!=o&&"relative"!=o&&"fixed"!=o&&(c=o,n.css("position","relative")),s=M?{}:L.clone().removeClass("drag-from").addClass("drag-shadow").css({position:"absolute",width:L.outerWidth(),transition:"none"}).appendTo(n),L.addClass("dragging"),a.addClass(N.dropTargetClass),y.trigger("start",{event:e,element:L,shadowElement:M?null:s,targets:a,mouseOffset:g})}var p={left:g.left-f.left,top:g.top-f.top},v={left:p.left-h.left,top:p.top-h.top};M||s.css(v);var b=!1;d=!1,$||a.removeClass(T);var w=null;if(a.each(function(){var e=t(this),i=e.offset(),o=e.outerWidth(),n=e.outerHeight(),a=i.left+N.sensorOffsetX,r=i.top+N.sensorOffsetY;if(g.left>a&&g.top>r&&g.left<a+o&&g.top<r+n&&(w&&w.removeClass(T),w=e,!N.nested))return!1}),w){d=!0;var D=w.data("id");L.data("id")==D&&L.closest(".kanban-lane").data("id")==w.closest(".kanban-lane").data("id")||(l=!1),(null===r||r.data("id")!==D&&!l)&&(b=!0),r=w,$&&a.removeClass(T),r.addClass(T)}$?null!==r&&r.length&&(d=!0):(L.toggleClass("drop-in",d),M||s.toggleClass("drop-in",d)),E&&E(L,r)===!1||y.trigger("drag",{event:e,isIn:d,target:r,element:L,isNew:b,selfTarget:l,clickOffset:f,offset:p,position:v,mouseOffset:g,lastMouseOffset:m}),t.extend(m,g),e.preventDefault()}},O=0,R=function(e){O&&(t.zui.clearAsap||clearTimeout)(O),O=(t.zui.asap||setTimeout)(function(){O=0,P(e)},0)},W=function(i){if(t(e).off(w),clearTimeout(v),A){if(A=!1,c&&n.css("position",c),null===s)return L.removeClass("drag-from"),void y.trigger("always",{target:r,event:i,cancel:!0});d||(r=null);var o=!0;g=i?{left:i.pageX,top:i.pageY}:m;var p={left:g.left-f.left,top:g.top-f.top},u={left:g.left-m.left,top:g.top-m.top};m.left=g.left,m.top=g.top;var b={event:i,isIn:d,target:r,element:L,isNew:!l&&null!==r,selfTarget:l,offset:p,mouseOffset:g,position:{left:p.left-h.left,top:p.top-h.top},lastMouseOffset:m,moveOffset:u};o=y.trigger("beforeDrop",b),o&&d&&y.trigger("drop",b),a.removeClass(T).removeClass(N.dropTargetClass),L.removeClass("dragging").removeClass("drag-from"),M||s.remove(),s=null,y.trigger("finish",b),y.trigger("always",b),i&&i.preventDefault()}},I=function(i){var o=t.zui.getMouseButtonCode(N.mouseButton);if(!(o>-1&&i.button!==o)){var g=t(this);k&&(L=C?g.closest(k):g),L.hasClass("drag-shadow")||N.before&&N.before({event:i,element:L})===!1||(A=!0,n=N.container?"function"==typeof N.container?N.container(L,b):t(N.container).first():k?b:t("body"),a="function"==typeof N.target?N.target(L,b):n.find(N.target),r=null,s=null,d=!1,l=!0,c=null,p=L.offset(),h=n.offset(),h.top=h.top-n.scrollTop(),h.left=h.left-n.scrollLeft(),u={left:i.pageX,top:i.pageY},m=t.extend({},u),f={left:u.left-p.left,top:u.top-p.top},L.addClass("drag-from"),t(e).on(z,R).on(x,W),v=setTimeout(function(){t(e).on(D,W)},10),i.preventDefault(),N.stopPropagation&&i.stopPropagation())}};C?b.on(D,C,I):k?b.on(D,k,I):b.on(D,I)},r.prototype.destroy=function(){var i="."+o+"."+this.id;this.$.off(i),t(e).off(i),this.$.data(o,null)},r.prototype.reset=function(){this.destroy(),this.init()},t.fn.droppable=function(e){return this.each(function(){var i=t(this),n=i.data(o),a="object"==typeof e&&e;n||i.data(o,n=new r(this,a)),"string"==typeof e&&n[e]()})},t.fn.droppable.Constructor=r}(jQuery,document,Math),function(t,e,i,o,n){"use strict";var a=0,r=function(t){var o,n=i,a=t[0];if(n.body.createTextRange)o=i.body.createTextRange(),o.moveToElementText(a),o.select();else if(e.getSelection){var r=e.getSelection();o=i.createRange(),o.selectNodeContents(a),r.removeAllRanges(),r.addRange(o)}},s=function(e,i){var o=this;o.$=t(e),o.options=o.getOptions(i),o.lang=o.getLang(),o.data=o.options.data,o.dirtyData=!0,o.offsetX=0,o.offsetY=0,o.init(),o.options.hotkeyEnable||t.zui.messager.show(o.lang.hotkeyDisabled)};s.DEFAULTS={hotkeyEnable:!0,hotkeys:{selectPrev:"Up",selectNext:"Down",selectLeft:"left",selectRight:"right",deleteNode:"del backspace",addBrother:"return",addChild:"tab insert",centerCanvas:"space ctrl+1",toggleNode:"+ -",zoomIn:"ctrl+=",zoomOut:"ctrl+-",zoomReset:"ctrl+0"},lang:"zh_cn",langs:{zh_cn:{defaultName:"灵光闪现",defaultSubName:"灵光",defaultNodeName:"闪现",readonlyTip:"该节点已被设置为只读，无法进行编辑。",hotkeyDisabled:'快捷键不可用，需要 <a target="_blank" href="https://github.com/jeresig/jquery.hotkeys">jquery.hotkeys</a> 插件支持。'}},data:{text:"New Project",type:"root",collapesed:!1,theme:"default",caption:"",id:t.zui.uuid()+""},nodeTeamplate:"<div id='node-{id}' class='mindmap-node' data-type='{type}' data-id='{id}' data-parent='{parent}'><div class='wrapper'><div class='text'>{text}</div><div class='caption'>{caption}</div><div class='btn-toggle'></div></div></div>",hSpace:100,vSpace:10,canvasPadding:20,removingNodeTip:null,lineCurvature:60,subLineWidth:4,lineColor:"",lineOpacity:1,lineSaturation:90,lineLightness:40,nodeLineWidth:2,showToggleButton:!1,readonly:!1,minimap:!1,toolbar:!0,zoom:1,zoomMax:4,zoomMin:.2,minimapHeight:100},s.prototype.getOptions=function(e){return s.DEFAULTS.data.text=s.DEFAULTS.langs.zh_cn.defaultName,e=t.extend({},s.DEFAULTS,this.$.data(),e),e.hotkeyEnable=e.hotkeyEnable&&t.hotkeys!==n,e},s.prototype.getLang=function(){var i=this.options;if(!i.lang){if(e.config!==n&&e.config.clientLang)i.lang=config.clientLang;else{var o=t("html").attr("lang");i.lang=o?o:"en"}i.lang=i.lang.replace(/-/,"_").toLowerCase()}var a=i.langs[i.lang]||i.langs[s.DEFAULTS.lang];return i.defaultSubName&&(a.defaultSubName=i.defaultSubName),i.defaultNodeName&&(a.defaultNodeName=i.defaultNodeName),a},s.prototype.init=function(){this.initDom(),this.initSize(),this.bindEvents(),this.render(),this.setZoom(this.options.zoom||1)},s.prototype.initDom=function(){var e=this,i=e.options,n=e.$;if(n.attr("id")||n.attr("id","mindmap-"+t.zui.uuid()),e.id=n.attr("id"),e.$container=n.children(".mindmap-container"),e.$container.length||(n.prepend("<div class='mindmap-container'></div>"),e.$container=n.children(".mindmap-container")),e.$canvas=e.$container.children("canvas"),e.$canvas.length||(e.$container.prepend("<canvas class='mindmap-bg'></canvas>".format(i.canvasSize)),e.$canvas=e.$container.children("canvas")),e.$desktop=e.$container.children(".mindmap-desktop"),e.$desktop.length||(e.$container.append("<div class='mindmap-desktop'></div>"),e.$desktop=e.$container.children(".mindmap-desktop")),e.$desktop.attr("unselectable","on").toggleClass("mindmap-show-toggle-btn",!!i.showToggleButton),i.toolbar){e.$toolbar=n.children(".mindmap-toolbar"),e.$toolbar.length||(n.append(['<div class="mindmap-toolbar">','<a class="mindmap-action-btn" data-action="zoomIn"><i class="icon icon-'+(i.zoomInIcon||"plus-sign")+'"></i></a>','<div class="mindmap-zoom-bar"><a class="mindmap-zoom-bar-btn"></a></div>','<a class="mindmap-action-btn" data-action="zoomOut"><i class="icon icon-'+(i.zoomOutIcon||"minus-sign")+'"></i></a>','<a class="mindmap-action-btn" data-action="zoomReset"><i class="icon icon-'+(i.zoomResetIcon||"expand-full")+'"></i></a>','<a class="mindmap-action-btn" data-action="moveCenter"><i class="icon icon-'+(i.centerIcon||"dot-circle")+'"></i></a>',"</div>"].join("")),e.$toolbar=n.children(".mindmap-toolbar")),e.$toolbar.on("click",".mindmap-action-btn",function(){var i=t(this).data("action");"moveCenter"===i?e.display(0,0):"zoomReset"===i?e.setZoom(1):"zoomIn"===i?e.zoomIn():"zoomOut"===i&&e.zoomOut()});var a=e.$toolbar.find(".mindmap-zoom-bar"),r=function(t){var n=a[0].getBoundingClientRect(),r=n.height/2,s=t.pageY-n.top,d=e.zoom;d=s>=r?1-(s-r)/r*(1-i.zoomMin):1+(r-s)/r*(i.zoomMax-1),e.setZoom(o.round(10*d)/10)};a.on("click",r).find(".mindmap-zoom-bar-btn").draggable({stopPropagation:!0,move:!1,finish:function(t){r(t.event)},drag:function(t){r(t.event)}})}i.minimap&&(e.$minimap=n.children(".mindmap-minimap"),e.$minimap.length||(n.append(['<div class="mindmap-minimap">','<canvas class="mindmap-minimap-canvas" />','<div class="mindmap-minimap-viewport"></div>',"</div>"].join("")),e.$minimap=n.children(".mindmap-minimap")),e.$minimap.height(i.minimapHeight||100),e.$minimapCanvas=e.$minimap.children(".mindmap-minimap-canvas"),e.$minimapView=e.$minimap.find(".mindmap-minimap-viewport").draggable({container:e.$minimap,stopPropagation:!0,move:function(t,i){var n=e.$minimap,a=n.width(),r=n.height(),s=e.minimapDragStart,d=e.minimapRect,l={left:o.max(0,o.min(a-d.width,t.left)),top:o.max(0,o.min(r-d.height,t.top))};i.css(l);var c=s.x-(l.left-s.pos.left)/e.minimapScale,p=s.y-(l.top-s.pos.top)/e.minimapScale;e.x===c&&e.y===p||e.display(c,p,"absolute")},before:function(t){e.minimapDragStart={x:e.x,y:e.y,pos:e.$minimapView.position()}}}))},s.prototype.initSize=function(){var t=this.$;this.winWidth=t.width(),this.winHeight=t.height(),this.centerX=o.floor(this.winWidth/2),this.centerY=o.floor(this.winHeight/2),this.dirtyData||this.display()},s.prototype.callEvent=function(e,i){return t.zui.callEvent(this.options[e],i,this)},s.prototype.computePosition=function(t,e){var i=e?-1:1;return t.left!==n&&(t.left-=(this.left-this.options.canvasPadding)*i),t.top!==n&&(t.top-=this.top*i),t.x!==n&&(t.x-=(this.left-this.options.canvasPadding)*i),t.y!==n&&(t.y-=this.top*i),t},s.prototype.computeColor=function(e,i){return e instanceof t.zui.Color||(e=new t.zui.Color(e)),"number"==typeof i&&e.fade(i),e.toCssStr()},s.prototype.getNodeData=function(t,e){if("number"==typeof t&&(t=t.toString()),e||(e=this.data),t==e.id)return e;if(Array.isArray(e.children)&&e.children.length>0)for(var i in e.children){var o=this.getNodeData(t,e.children[i]);if(o)return o}return null},s.prototype.createDefaultNodeData=function(e){var i={collapesed:!1,id:t.zui.uuid()+"",parent:e.id};return"root"===e.type?(i.type="sub",i.text=this.lang.defaultSubName):(i.type="node",i.text=this.lang.defaultNodeName),i},s.prototype.getNode=function(t){return"string"==typeof t?this.$desktop.children('[data-id="'+t+'"]'):t.id!==n?t.ui.element:void 0},s.prototype.removeNode=function(t){if(this.getNode(t).remove(),t.count>0)for(var e in t.children)this.removeNode(t.children[e])},s.prototype.toggleNode=function(t,e){var i=this;"focused"===t&&(t=i.activeNode.id);var o="string"==typeof t?i.getNodeData(t):t;if(o&&"root"!==o.type){if(e===n&&(e=!o.collapesed),i.update({data:o,action:"update",collapesed:e}),e&&o.children&&o.children.length){var a=function(t){for(var e=0;e<t.length;++e){var o=t[e];i.getNode(o).remove(),o.children&&o.children.length&&a(o.children)}};a(o.children)}return e}},s.prototype.zoomIn=function(){this.setZoom(this.zoom+(this.zoom<=1?.2:.5))},s.prototype.zoomOut=function(){this.setZoom(this.zoom-(this.zoom<=1?.2:.5))},s.prototype.setZoom=function(t){var e=this,i=e.options;if(t=o.min(o.max(t,i.zoomMin),i.zoomMax),t!==e.zoom){e.zoom=t,e.$container.css("transform","scale("+t+")");var n=e.$toolbar.find(".mindmap-zoom-bar").attr("title",o.round(100*t)+"%"),a=n.height()/2,r=0;r=t>=1?(i.zoomMax-t)/(i.zoomMax-1)*a:a+(1-t)/(1-i.zoomMin)*a,n.find(".mindmap-zoom-bar-btn").css("top",r),e.draw(),e.updateMinimapViewport()}},s.prototype.update=function(e,i,o){var a=!1;this.options;if(t.isPlainObject(e)&&(e=[e]),Array.isArray(e))for(var r in e){var s=e[r],d=s.data;if(d||(d=this.getNodeData(s.id)),!d||d.readonly)return;var l=s.action||"update";if("remove"===l||"delete"===l){var c=this.getNodeData(d.parent);c&&(c.children.splice(d.index,1),this.removeNode(d),this.clearNodeStatus(),"add"!==d.changed&&(Array.isArray(c.deletions)?c.deletions.push(d):c.deletions=[d],d.changed="delete",c.changed="delete children"),o=!0,i=!0,a=!0)}else if("add"===l)Array.isArray(d.children)?d.children.push(s.newData):d.children=[s.newData],d.count+=1,s.newData.index=d.count,s.newData.changed="add",o=!0,i=!0,a=!0;else if("move"===l){if(s.newParent!==d.parent){var p=this.getNodeData(s.newParent),c=this.getNodeData(d.parent);c&&p&&("root"===p.type?("node"===d.type&&(d.color=null),d.type="sub",d.subSide=null):(d.type="node",d.subSide=p.subSide),c.children.splice(d.index,1),c.count-=1,Array.isArray(p.children)?p.children.push(d):p.children=[d],p.count+=1,d.index=p.count,o=!0,i=!0,a=!0,"add"!==d.changed&&(d.changed="move"))}}else if("sort"===l){if(d.count>1){d.children.sort(s.func);for(var r in d.children){var u=d.children[r];u.index!==r&&(u.index=r,"add"!==u.changed&&(u.changed="sort"),o=!0,i=!0,a=!0)}}}else s.text!==n&&s.text!==d.text&&(d.text=s.text,i=!0,a=!0),s.collapesed!==n&&s.collapesed!==d.collapesed&&(d.collapesed=s.collapesed,o=!0,i=!0,a=!0),s.subSide!==n&&s.subSide!==d.subSide&&(d.subSide=s.subSide,o=!0,i=!0,a=!0),a&&"add"!==d.changed&&(d.changed="edit")}o&&this.loadNode(),i&&this.showNode(),a&&this.callEvent("onChange",{changes:e,data:this.data})},s.prototype.clearChangeFlag=function(t){if(t===n&&(t=this.data),t.changed&&(t.changed=null),t.children)for(var e in t.children)this.clearChangeFlag(t.children[e])},s.prototype.exportData=function(){var e=t.extend({},this.data);return this.fixExport(e),e},s.prototype.exportJSON=function(){return JSON.stringify(this.exportData())},s.prototype.exportArray=function(e,i){e===n&&(e=this.data),i===n&&(i=[]);var o=t.extend({},e);if(delete o.ui,delete o.children,delete o.subSide,i.push(o),e.children)for(var a in e.children)this.exportArray(e.children[a],i);return i},s.prototype.fixExport=function(t){if(delete t.ui,t.children)for(var e in t.children)this.fixExport(t.children[e])},s.prototype.load=function(t){this.data=t,this.render(t)},s.prototype.render=function(){this.loadNode(),this.showNode()},s.prototype.loadNode=function(e,i,r){e||(e=this.data);var s=this.options,d=this.$desktop,l="object"==typeof i&&i.id?i.id:"";e.collapesed===n&&(e.collapesed=!1),e.data===n&&(e.data={}),e.type===n&&(e.type="node"),e.id===n&&(e.id=t.zui.uuid()+""),e.readonly===n&&(e.readonly=!1),e.ui===n&&(e.ui={}),e.parent=l;var c=d.children('.mindmap-node[data-id="'+e.id+'"]');if(c.length?(c.toggleClass("mindmap-collapesed",!!e.collapesed).toggleClass("mindmap-expanded",!e.collapesed).toggleClass("mindmap-has-child",!(!e.children||!e.children.length)).attr("data-type",e.type).attr("data-parent",l||"root"),c.children(".text").html(e.text),c.children(".caption").html(e.caption)):(c=t(s.nodeTeamplate.format({type:e.type||"node",collapesed:e.collapesed,caption:e.caption||"",id:e.id,parent:l||"root",text:e.text})).toggleClass("mindmap-collapesed",!!e.collapesed).toggleClass("mindmap-expanded",!e.collapesed).appendTo(d).toggleClass("mindmap-has-child",!(!e.children||!e.children.length)),this.bindNodeEvents(c),e.ui.element=c),"root"===e.type)e.ui.subLeftSide=0,e.ui.subRightSide=0,e.ui.vLeftSpan=0,e.ui.vRightSpan=0;else if("sub"===e.type){var p=e.subSide;p||(p=i.ui.subRightSide>i.ui.subLeftSide?"left":"right"),"left"===p?i.ui.subLeftSide++:i.ui.subRightSide++,e.subSide=p,e.color===n&&(e.color=s.lineColor||{h:o.floor(43*a++%360),s:s.lineSaturation/100,l:s.lineLightness/100,a:s.lineOpacity})}else e.subSide=i.subSide;c.data("origin-text",e.text).data("node",e).toggleClass("readonly",e.readonly).toggleClass("mindmap-side-left","left"===e.subSide).toggleClass("mindmap-side-right","right"===e.subSide),e.className&&c.addClass(e.className);var u=1;if(e.count=0,!e.collapesed&&e.children&&e.children.length>0){e.ui.topSpanTemp="root"===e.type?{left:0,right:0}:0;var h=0,f=0,g=null;u=0,e.children.sort(function(t,e){return t.index-e.index});for(var m in e.children){var v=e.children[m];v.ui===n&&(v.ui={}),"sub"!==v.type&&v.color===n&&(v.color=e.color),v.ui.nextBrother=null,g?(v.ui.prevBrother=g.id,g.ui.nextBrother=v.id):v.ui.prevBrother=null,g=v,this.loadNode(v,e,m),v.index=e.count++,v.order===n&&(v.order=v.index),u+=v.ui.vSpan,"sub"===v.type?"left"===v.subSide?(h+=v.ui.vSpan,v.ui.topSpan=e.ui.topSpanTemp.left,e.ui.topSpanTemp.left+=v.ui.vSpan):(f+=v.ui.vSpan,v.ui.topSpan=e.ui.topSpanTemp.right,e.ui.topSpanTemp.right+=v.ui.vSpan):(v.ui.topSpan=e.ui.topSpanTemp,e.ui.topSpanTemp+=v.ui.vSpan)}"root"===e.type&&(e.ui.vLeftSpan=h,e.ui.vRightSpan=f)}"root"!==e.type&&(e.ui.vSpan=u),this.dirtyData=!1,"root"===e.type&&this.callEvent("afterLoad",{data:e,$node:c})},s.prototype.showNode=function(e,i,n){var a=this;e||(e=a.data);var r=a.options,s=e.ui,d=e.ui.element;if(s.width=d.outerWidth(),s.height=d.outerHeight(),"root"===e.type)s.left=0-o.floor(s.width/2),s.top=0-o.floor(s.height/2),a.left=0-o.floor(o.max(s.width+r.canvasPadding,a.winWidth)/4),a.right=0-a.left,a.top=0-o.floor(o.max(s.height+r.canvasPadding,a.winHeight)/4),a.bottom=0-a.top;else if(t.isPlainObject(s.dragPos))s.left=s.dragPos.left,s.top=s.dragPos.top;else{if("sub"===e.type){var l=0;"left"===e.subSide?(s.left=i.ui.left-r.hSpace-20-s.width,l=i.ui.vLeftSpan):(s.left=i.ui.left+i.ui.width+r.hSpace+20,l=i.ui.vRightSpan);var c=l*s.height+(l-1)*r.vSpace,p=0-o.floor(c/2),u=s.topSpan*s.height+s.topSpan*r.vSpace,h=s.vSpan*s.height+(s.vSpan-1)*r.vSpace;s.top=p+u+o.floor((h-s.height)/2)}else{"left"===e.subSide?s.left=i.ui.left-r.hSpace-s.width:s.left=i.ui.left+i.ui.width+r.hSpace;var c=i.ui.vSpan*s.height+(i.ui.vSpan-1)*r.vSpace,p=i.ui.top+o.floor(i.ui.height/2)-o.floor(c/2),u=s.topSpan*s.height+s.topSpan*r.vSpace,h=s.vSpan*s.height+(s.vSpan-1)*r.vSpace;s.top=p+u+o.floor((h-s.height)/2)}"left"===e.subSide?a.left=o.min(a.left,s.left):a.right=o.max(a.right,s.left+s.width),a.top=o.min(a.top,s.top),a.bottom=o.max(a.bottom,s.top+s.height)}if(!e.collapesed&&e.children&&e.children.length>0)for(var f in e.children)a.showNode(e.children[f],e,n||e.collapesed);if("root"===e.type){var g=a.options.canvasPadding;a.left-=g,a.top-=g,a.right+=2*g,a.bottom+=g,a.width=a.right-a.left,a.height=a.bottom-a.top,a.display(),a.draw(),a.renderMinimap(),a.callEvent("afterShow",{data:e})}},s.prototype.display=function(t,e,i){var n=this,a="absolute"===i;"number"==typeof t&&"number"==typeof e&&(t=o.round(t),e=o.round(e),i&&!a&&(t+=n.offsetX,e+=n.offsetY),n.offsetX=t-(a?n.left+n.centerX:0),n.offsetY=e-(a?n.top+n.centerY:0)),n.x=n.centerX+n.left+n.offsetX,n.y=n.centerY+n.top+n.offsetY,n.$container.css({width:n.width,height:n.height,top:n.y,left:n.x,transformOrigin:n.width/2-n.offsetX+"px "+(n.height/2-n.offsetY)+"px"});var r=n.options.canvasPadding;n.$.toggleClass("shadow-left",n.x<0-r).toggleClass("shadow-right",n.x+n.width>n.winWidth+r).toggleClass("shadow-top",n.y<0-r).toggleClass("shadow-bottom",n.y+n.height>n.winHeight+r),n.updateMinimapViewport()},s.prototype.makeNodeVisble=function(t){var e=this.getNodeData(t.data("id"));if(e){var i=e.ui.left-this.left+this.x,o=e.ui.top-this.top+this.y,n=this.options.canvasPadding;if(i<0)this.offsetX+=0-i;else{var a=i+e.ui.width-(this.winWidth+n);a>0&&(this.offsetX+=0-a-80)}if(o<0)this.offsetY+=0-o;else{var a=o+e.ui.height-(this.winWidth+n);a>0&&(this.offsetY+=0-a-80)}this.display()}},s.prototype.draw=function(t,i,n){var a=this;if(t||(t=a.data),a.canvasScale=(a.zoom||1)*(e.devicePixelRatio||1),a.canvasWidth=a.width*a.canvasScale,a.canvasHeight=a.height*a.canvasScale,"root"===t.type){a.$canvas.attr({width:a.canvasWidth,height:a.canvasHeight}).css({width:a.width,height:a.height});var r=a.$canvas[0].getContext("2d");r.scale(a.canvasScale,a.canvasScale),r.clearRect(0,0,a.width,a.height)}if(i){if(n)return;var s="left"===t.subSide,d=a.options,r=a.$canvas[0].getContext("2d"),l={x:i.ui.left+("root"===i.type?o.floor(i.ui.width/2):s?0:i.ui.width),y:i.ui.top+o.floor(i.ui.height/2)},c={x:t.ui.left+(s?t.ui.width:0),y:t.ui.top+o.floor(t.ui.height/2)},p={x:l.x+(s?-1:1)*d.lineCurvature,y:l.y},u={x:c.x+(s?1:-1)*d.lineCurvature,y:c.y};l=a.computePosition(l),c=a.computePosition(c),p=a.computePosition(p),u=a.computePosition(u),r.beginPath(),r.strokeStyle=a.computeColor(t.color,t.ui.canDrop?25:100),r.lineCap="round",r.lineWidth="sub"===t.type?d.subLineWidth:d.nodeLineWidth,r.moveTo(l.x,l.y),r.bezierCurveTo(p.x,p.y,u.x,u.y,c.x,c.y),r.stroke()}if(t.ui.element.css(a.computePosition({left:t.ui.left,top:t.ui.top})),!t.collapesed&&t.children&&t.children.length>0)for(var h in t.children)a.draw(t.children[h],t,n||t.collapesed)},s.prototype.renderMinimap=function(i){var n=this;if(n.options.minimap){if(!i)return n.minimapTimer&&clearTimeout(n.minimapTimer),void(n.minimapTimer=setTimeout(function(){n.minimapTimer=null,n.renderMinimap(!0)},110));var a=n.$minimap,r=n.$minimapCanvas,s=e.devicePixelRatio||1,d=a.height(),l=o.round(n.width*d/n.height);a.width(l),r.attr({width:l*s,height:d*s}).css({width:l,height:d});var c=l/n.width,p=r[0].getContext("2d");p.scale(s,s),p.clearRect(0,0,l,d),p.drawImage(n.$canvas[0],0,0,l,d),p.drawImage(n.$canvas[0],-.5,.5,l,d),p.drawImage(n.$canvas[0],.5,-.5,l,d),p.drawImage(n.$canvas[0],-.5,-.5,l,d),p.drawImage(n.$canvas[0],.5,.5,l,d),n.$desktop.children(".mindmap-node").each(function(){var e=t(this),i=e.data("node"),o=e.position();p.fillStyle="root"===i.type||e.hasClass("active")?"#508dee":n.computeColor(i.color,i.ui.canDrop?25:80),p.fillRect(o.left*c/n.zoom,o.top*c/n.zoom,e.width()*c,e.height()*c)}),n.updateMinimapViewport(!0)}},s.prototype.updateMinimapViewport=function(t){var e=this;if(e.options.minimap){if(!t)return e.viewportTimer&&clearTimeout(e.viewportTimer),void(e.viewportTimer=setTimeout(function(){e.viewportTimer=null,e.renderMinimap(!0)},120));var i=e.$minimap,n=i.width(),a=e.$desktop[0].getBoundingClientRect(),r=e.$[0].getBoundingClientRect(),s=n/a.width,d=a.left-r.left,l=a.top-r.top,c=r.right-a.right,p=r.bottom-a.bottom;e.minimapScale=s,e.minimapRect={left:o.max(0,-d)*s,top:o.max(0,-l)*s,width:(a.width+o.min(0,c)+o.min(0,d))*s,height:(a.height+o.min(0,p)+o.min(0,l))*s},e.$minimap.find(".mindmap-minimap-viewport").css(e.minimapRect)}},s.prototype.bindNodeEvents=function(e){var i,o=this;e.on("click",function(i){var n=t(i.target);return n.hasClass("btn-toggle")?o.toggleNode(e.data("id")):void o.onNodeClick(i,e)}).mousedown(function(t){t.stopPropagation()}),o.options.readonly||(e.find(".text").on("keyup paste blur",function(t){o.onNodeTextChanged(t,e)}),"root"!==e.data("type")&&e.droppable({container:o.$container,target:"#"+o.id+' .mindmap-node:not([data-id="'+e.data("id")+'"])',noShadow:!0,before:function(t){return!!o.callEvent("beforeDrag",{$node:e})&&(!t.element.hasClass("focus")&&(i=o.getNodeData(t.element.data("id")),!!i&&void 0))},start:function(t){o.callEvent("startDrag",{$node:e}),t.element.hasClass("active")||(o.clearNodeStatus(),o.activeNode(e))},drag:function(t){var e={left:t.position.left/o.zoom,top:t.position.top/o.zoom};i.ui.dragPos=o.computePosition(e,!0),i.ui.canDrop=t.isIn,o.showNode()},beforeDrop:function(t){if(t.isIn){if(t.target.data("id")==i.parent)return!1}else{if(!o.callEvent("beforeSort",{node:e,event:t}))return;var n=i.subSide;"sub"===i.type&&(i.ui.left<-30?n="left":i.ui.left>30&&(n="right")),o.update([{action:"sort",data:o.getNodeData(i.parent),func:function(t,e){return t.ui.top-e.ui.top}},{data:i,subSide:n}]),o.callEvent("afterSort",{node:e,event:t})}},drop:function(t){o.callEvent("beforeMove",{node:i,event:t})&&(o.update({action:"move",data:i,newParent:t.target.data("id")}),o.callEvent("afterMove",{node:i,event:t}))},finish:function(t){i.ui.dragPos=null,i.ui.canDrop=!1,o.showNode()}})),this.callEvent("onBindEvents",{node:e})},s.prototype.onNodeClick=function(t,e){e.hasClass("active")?this.focusNode(e):(this.clearNodeStatus(),this.activeNode(e)),this.callEvent("onNodeClick",{node:e}),t.stopPropagation()},s.prototype.onNodeTextChanged=function(t,e){var i=e.find(".text"),o=i.text();o!==e.data("origin-text")&&(""===o&&i.text(""),e.data("origin-text",o),this.update({id:e.data("id"),text:o}),this.callEvent("onTextChanged",{node:e,text:o})),"blur"===t.type&&i.text(o)},s.prototype.activeNode=function(t){t===n&&(t=this.$desktop.children('.mindmap-node[data-type="sub"]').first()),t.length||(t=this.$desktop.children(".mindmap-node").first()),this.callEvent("beforeNodeActive",{node:t})&&(t.addClass("active"),this.makeNodeVisble(t),this.activedNode=t,this.isActive=!0,this.callEvent("onNodeActive",{node:t}))},s.prototype.focusNode=function(e,i){if(!this.options.readonly){if(e.hasClass("readonly"))return void t.zui.messager.show(this.lang.readonlyTip);if(e.hasClass("active")&&this.callEvent("beforeNodeFocus",{node:e})){var o=e.addClass("focus").find(".text");o.attr("contenteditable","true"),this.makeNodeVisble(e),o.focus(),(i||i===n)&&r(o),this.isFocus=!0}}},s.prototype.clearActiveNode=function(t){t===n&&(t=this.$desktop.children(".mindmap-node.active")),t.removeClass("active"),this.isActive=!1,this.activedNode=null},s.prototype.clearFocusNode=function(t){t===n&&(t=this.$desktop.children(".mindmap-node.focus")),t.removeClass("focus").find(".text").attr("contenteditable","false").blur(),this.isFocus=!1},s.prototype.bindEvents=function(){var t=this.$,e=this;t.resize(this.initSize.bind(this)).click(this.onDesktopClick.bind(this)),this.bindGlobalHotkeys(),this.$container.draggable({before:function(t){if(!e.callEvent("beforeMoveCanvas",{event:t}))return!1},finish:function(t){e.display(t.smallOffset.x/e.zoom,t.smallOffset.y/e.zoom,!0)},drag:function(t){e.display(t.smallOffset.x/e.zoom,t.smallOffset.y/e.zoom,!0)}})},s.prototype.bindGlobalHotkeys=function(){var e=this.options;if(e.hotkeyEnable){var o=this,n=e.hotkeys;t(i).on("keydown",null,n.selectPrev,function(t){o.callEvent("beforeHotkey",{event:t,hotkey:n.selectPrev})&&o.selectNode("prev")}).on("keydown",null,n.selectNext,function(t){o.callEvent("beforeHotkey",{event:t,hotkey:n.selectNext})&&o.selectNode("next")}).on("keydown",null,n.selectLeft,function(t){o.callEvent("beforeHotkey",{event:t,hotkey:n.selectLeft})&&o.selectNode("left")}).on("keydown",null,n.selectRight,function(t){o.callEvent("beforeHotkey",{event:t,hotkey:n.selectRight})&&o.selectNode("right")}).on("keydown",null,n.toggleNode,function(t){o.callEvent("beforeHotkey",{event:t,hotkey:n.toggleNode})&&o.toggleNode("focused")}).on("keydown",null,n.centerCanvas,function(t){o.callEvent("beforeHotkey",{event:t,hotkey:n.centerCanvas})&&o.display(0,0)}).on("keydown",null,n.zoomIn,function(t){o.callEvent("beforeHotkey",{event:t,hotkey:n.zoomIn})&&o.zoomIn()}).on("keydown",null,n.zoomOut,function(t){o.callEvent("beforeHotkey",{event:t,hotkey:n.zoomOut})&&o.zoomOut()}).on("keydown",null,n.zoomReset,function(t){o.callEvent("beforeHotkey",{event:t,hotkey:n.zoomReset})&&o.setZoom(1)}),o.options.readonly||t(i).on("keydown",null,n.deleteNode,function(){o.callEvent("beforeHotkey",{event:event,hotkey:n.deleteNode})&&(o.deleteNode(),8!=event.keyCode||o.isFocus||event.preventDefault());
}).on("keydown",null,n.addBrother,function(){o.callEvent("beforeHotkey",{event:event,hotkey:n.addBrother})&&o.addBrotherNode()}).on("keydown",null,n.addChild,function(t){o.callEvent("beforeHotkey",{event:t,hotkey:n.addChild})&&(o.addChildNode(),9==t.keyCode&&t.preventDefault())}).on("keydown",function(){if(o.callEvent("beforeHotkey",{event:event,type:"keydown"})&&event.keyCode>=48&&event.keyCode<=111&&o.isActive&&!o.isFocus){var t=o.activedNode;t&&(t.find(".text").text(""),o.focusNode(t))}})}},s.prototype.addBrotherNode=function(){if(this.isActive){var t=this.getNodeData(this.activedNode.data("id"));if(t){var e="root"===t.type?t:this.getNodeData(t.parent),i=this.createDefaultNodeData(e);if(!this.callEvent("beforeAdd",{node:e,newNode:i}))return;this.update({action:"add",data:e,newData:i}),this.clearNodeStatus();var o=this.getNode(i.id);this.activeNode(o),this.focusNode(o,!0),this.callEvent("afterAdd",{node:e,newNode:i})}}},s.prototype.addChildNode=function(){if(this.isActive){var t=this.getNodeData(this.activedNode.data("id"));if(t){var e=this.createDefaultNodeData(t);if(!this.callEvent("beforeAdd",{node:t,newNode:e}))return;this.update({action:"add",data:t,newData:e}),this.clearNodeStatus();var i=this.getNode(e.id);this.activeNode(i),this.focusNode(i,!0),this.callEvent("afterAdd",{node:t,newNode:e})}}},s.prototype.deleteNode=function(){if(!this.isFocus&&this.isActive){var t=this.getNodeData(this.activedNode.data("id"));if(t){if(!this.callEvent("beforeDelete",{node:t}))return;this.update({action:"remove",data:t}),this.callEvent("afterDelete",{node:t})}}},s.prototype.selectNode=function(t){if(!this.isFocus){if(!this.isActive)return void this.activeNode();var e=null,i=this.getNodeData(this.activedNode.data("id")),o=null;switch("root"===i.type?t="prev"===t||"left"===t?"left":"right":"left"===t?t="left"==i.subSide?"child":"parent":"right"===t&&(t="right"==i.subSide?"child":"parent"),t){case"prev":o=i.ui.prevBrother;break;case"next":o=i.ui.nextBrother;break;case"parent":o=i.parent;break;case"child":i.count>0&&!i.collapesed&&(o=i.children[0].id);break;case"left":if(i.count>0&&!i.collapesed){o=i.children[0].id;for(var n in i.children){var a=i.children[n];if("left"==a.subSide){o=a.id;break}}}break;case"right":if(i.count>0&&!i.collapesed){o=i.children[0].id;for(var n in i.children){var a=i.children[n];if("right"==a.subSide){o=a.id;break}}}}o&&(e=this.getNodeData(o)),e&&(this.clearNodeStatus(),this.activeNode(e.ui.element))}},s.prototype.selectNext=function(){if(!this.isFocus){var t=null;this.isActive||this.activeNode();var e=this.getNodeData(this.activedNode.data("id"));null!==e.ui.nextBrother&&(t=this.getNodeData(e.ui.nextBrother)),t&&(this.clearNodeStatus(),this.activeNode(t.ui.element))}},s.prototype.selectLeft=function(){if(!this.isFocus){var t=null;this.isActive||this.activeNode();var e=this.getNodeData(this.activedNode.data("id"));null!==e.ui.leftBrother&&(t=this.getNodeData(e.ui.leftBrother)),t&&(this.clearNodeStatus(),this.activeNode(t.ui.element))}},s.prototype.onDesktopClick=function(){this.$desktop;this.clearNodeStatus()},s.prototype.clearNodeStatus=function(){this.clearActiveNode(),this.clearFocusNode()},t.fn.mindmap=function(e){return this.each(function(){var i=t(this),o=i.data("zui.mindmap"),n="object"==typeof e&&e;o||i.data("zui.mindmap",o=new s(this,n)),"string"==typeof e&&o[e]()})},t.fn.mindmap.Constructor=s}(jQuery,window,document,Math,void 0);